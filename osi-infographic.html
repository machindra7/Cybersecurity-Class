<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSI Model Deep Dive Infographic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .font-handwriting {
            font-family: 'Caveat', cursive;
        }
        h1, h2, h3 {
            font-family: 'Caveat', cursive;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .flowchart-arrow {
            color: #0062E3;
            font-size: 2rem;
            line-height: 1;
            font-weight: bold;
        }
        .flowchart-box {
            border: 2px solid #418CFF;
            background-color: #ffffff;
            color: #004AAD;
        }
        .flowchart-box-dark {
            border: 2px solid #004AAD;
            background-color: #418CFF;
            color: #ffffff;
        }
        .data-packet {
            background-color: #CFE2FF;
            border: 1px dashed #418CFF;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-weight: 600;
            color: #004AAD;
        }
        .gemini-button {
            background-color: #89B9FF;
            color: #004AAD;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            font-size: 1.25rem;
            line-height: 1;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .gemini-button:hover {
            background-color: #418CFF;
            color: white;
            transform: scale(1.1);
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.5rem;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #418CFF;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-[#EBF4FF]">

    <div class="container mx-auto p-4 md:p-8">
        
        <header class="text-center mb-12">
            <h1 class="text-6xl md:text-8xl text-[#004AAD] mb-3 font-bold">The OSI Model: A Deep Dive</h1>
            <p class="text-lg md:text-xl text-[#0062E3] font-semibold">Deconstructing the 7 Layers of Network Communication</p>
        </header>

        <main class="space-y-16">
            
            <section class="bg-white rounded-lg shadow-2xl p-6 md:p-8">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div class="text-center md:text-left">
                        <h2 class="text-5xl font-bold text-[#004AAD] mb-4">What is the OSI Model?</h2>
                        <p class="text-md md:text-lg text-gray-700 mb-6">
                            The Open Systems Interconnection (OSI) model is a conceptual framework that standardizes network functions into seven distinct layers. From the physical cables to the software you interact with, this model ensures all parts of a network can communicate effectively.
                        </p>
                         <div class="flex justify-center md:justify-start items-center gap-4">
                            <span class="text-8xl font-black text-[#0062E3]">7</span>
                            <span class="text-3xl font-bold text-[#004AAD] text-left">Logical<br>Layers</span>
                        </div>
                    </div>
                     <div class="flex flex-col items-center">
                        <div class="w-full max-w-xs space-y-1">
                            <div class="flowchart-box-dark text-center p-3 rounded-lg shadow-lg"><h3 class="text-2xl">7. Application</h3></div>
                            <div class="text-center flowchart-arrow text-xl">‚ñº</div>
                            <div class="flowchart-box text-center p-3 rounded-lg shadow-lg"><h3 class="text-2xl">6. Presentation</h3></div>
                             <div class="text-center flowchart-arrow text-xl">‚ñº</div>
                            <div class="flowchart-box text-center p-3 rounded-lg shadow-lg"><h3 class="text-2xl">5. Session</h3></div>
                             <div class="text-center flowchart-arrow text-xl">‚ñº</div>
                            <div class="flowchart-box text-center p-3 rounded-lg shadow-lg"><h3 class="text-2xl">4. Transport</h3></div>
                             <div class="text-center flowchart-arrow text-xl">‚ñº</div>
                            <div class="flowchart-box text-center p-3 rounded-lg shadow-lg"><h3 class="text-2xl">3. Network</h3></div>
                             <div class="text-center flowchart-arrow text-xl">‚ñº</div>
                            <div class="flowchart-box text-center p-3 rounded-lg shadow-lg"><h3 class="text-2xl">2. Data Link</h3></div>
                             <div class="text-center flowchart-arrow text-xl">‚ñº</div>
                            <div class="flowchart-box text-center p-3 rounded-lg shadow-lg"><h3 class="text-2xl">1. Physical</h3></div>
                        </div>
                    </div>
                </div>
            </section>

            <section>
                 <div class="text-center mb-10">
                    <div class="flex justify-center items-center gap-4">
                        <h2 class="text-5xl font-bold text-[#004AAD]">The Upper Layers: Managing Data & Sessions</h2>
                        <button class="gemini-button" data-layer-group="Upper Layers (7, 6, 5)" title="‚ú® Get a simple analogy for the Upper Layers">‚ú®</button>
                    </div>
                    <p class="text-lg text-gray-700 max-w-3xl mx-auto mt-2">Layers 7, 6, and 5 are often called the "upper layers." They focus on application-level issues, data representation, and managing communication sessions.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h3 class="text-4xl font-bold text-[#004AAD] mb-3">7. Application Layer</h3>
                        <p class="text-gray-600">The interface for the user. Provides network services to applications like your web browser (HTTP) or email client (SMTP).</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h3 class="text-4xl font-bold text-[#004AAD] mb-3">6. Presentation Layer</h3>
                        <p class="text-gray-600">Acts as a data translator. Handles encryption, compression, and ensures data is in a usable format for the application.</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-md p-6 md:col-span-2 lg:col-span-1">
                        <h3 class="text-4xl font-bold text-[#004AAD] mb-3">5. Session Layer</h3>
                        <p class="text-gray-600">Establishes, manages, and terminates connections (sessions). For example, it keeps you logged in while you browse a site.</p>
                    </div>
                </div>
            </section>
            
            <section class="bg-white rounded-lg shadow-2xl p-6 md:p-8">
                <div class="text-center mb-10">
                    <div class="flex justify-center items-center gap-4">
                        <h2 class="text-5xl font-bold text-[#004AAD]">Layer 4: The Transport Layer</h2>
                        <button class="gemini-button" data-layer-group="Transport Layer (4)" title="‚ú® Get a simple analogy for the Transport Layer">‚ú®</button>
                    </div>
                    <p class="text-lg text-gray-700 max-w-3xl mx-auto mt-2">This is the heart of end-to-end communication. It decides how much data to send, at what rate, and where it goes. Its two main protocols, TCP and UDP, offer a trade-off between reliability and speed.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div>
                        <div class="chart-container h-80 md:h-96">
                            <canvas id="tcpUdpChart"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-4xl font-bold text-[#004AAD] mb-4">TCP vs. UDP: Key Differences</h3>
                        <p class="text-gray-700 mb-6">This chart visualizes the fundamental trade-off. TCP is built for reliability, ensuring every packet arrives in order, making it perfect for file transfers and web browsing. UDP prioritizes speed over perfection, making it ideal for streaming and online gaming where a lost packet is better than a long delay.</p>
                        <div class="space-y-4">
                            <div class="p-4 flowchart-box rounded-lg"><strong>TCP (Transmission Control Protocol):</strong> Slow but highly reliable. Uses handshakes and sequential packet checking.</div>
                            <div class="p-4 flowchart-box rounded-lg"><strong>UDP (User Datagram Protocol):</strong> Fast but unreliable. Sends packets without checking for receipt.</div>
                        </div>
                    </div>
                </div>
            </section>

            <section>
                 <div class="text-center mb-10">
                     <div class="flex justify-center items-center gap-4">
                        <h2 class="text-5xl font-bold text-[#004AAD]">The Lower Layers: Addressing & Routing</h2>
                        <button class="gemini-button" data-layer-group="Lower Layers (3, 2, 1)" title="‚ú® Get a simple analogy for the Lower Layers">‚ú®</button>
                    </div>
                    <p class="text-lg text-gray-700 max-w-3xl mx-auto mt-2">Layers 3, 2, and 1 handle the logistics of getting data across the network‚Äîfrom finding the best path to handling physical addresses and transmitting raw data.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
                    <div class="bg-white rounded-lg shadow-md p-6 lg:col-span-3">
                        <h3 class="text-4xl font-bold text-[#004AAD] mb-3">3. Network Layer</h3>
                        <p class="text-gray-600 mb-4">This layer is the network's traffic cop. It determines the best path for data to travel using logical addresses (IP addresses). Routers, which are Layer 3 devices, operate here to forward packets between different networks, only looking at the destination IP address.</p>
                        <div class="bg-gray-100 p-3 rounded-lg text-center font-mono text-sm">
                            <p class="font-bold mb-2 text-[#004AAD]">Typical Packet Structure</p>
                            <div class="flex flex-wrap justify-center gap-1">
                                <span class="data-packet bg-red-100 border-red-300">Sender MAC</span>
                                <span class="data-packet bg-blue-100 border-blue-300">Sender IP</span>
                                <span class="data-packet">Data</span>
                                <span class="data-packet bg-blue-100 border-blue-300">Receiver IP</span>
                                <span class="data-packet bg-red-100 border-red-300">Receiver MAC</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h3 class="text-4xl font-bold text-[#004AAD] mb-3">2. Data Link Layer</h3>
                        <p class="text-gray-600">Manages node-to-node data transfer on the same local network. It uses physical addresses (MAC addresses) to identify devices and ensures data is correctly framed for transmission.</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h3 class="text-4xl font-bold text-[#004AAD] mb-3">1. Physical Layer</h3>
                        <p class="text-gray-600">This is the hardware layer. It's responsible for the physical transmission of raw data bits over cables, fiber optics, or radio waves.</p>
                    </div>
                </div>
            </section>

            <section class="bg-white rounded-lg shadow-2xl p-6 md:p-8">
                <div class="text-center mb-10">
                    <h2 class="text-5xl font-bold text-[#004AAD] mb-2">A Threat in the Network: ARP Spoofing</h2>
                    <p class="text-lg text-gray-700 max-w-3xl mx-auto">Network layers can also be exploited. ARP Spoofing is a common attack where an attacker on an internal network intercepts data by tricking a router.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h3 class="text-4xl font-bold text-[#004AAD] mb-4">How it Works</h3>
                        <p class="text-gray-700 mb-4">The attacker sends false ARP (Address Resolution Protocol) messages to the router. They claim their own MAC address corresponds to the IP address of a legitimate user's machine. The router, now fooled, sends the legitimate user's data to the attacker instead.</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li>Attacker must be on the internal network.</li>
                            <li>Allows the attacker to see payload data, including file downloads.</li>
                            <li>This is a "man-in-the-middle" attack.</li>
                        </ul>
                    </div>
                    <div class="p-4 bg-gray-50 rounded-lg">
                        <div class="flex justify-between items-center mb-4">
                            <div class="text-center">
                                <div class="text-3xl">üíª</div>
                                <div class="font-bold text-sm text-green-600">User</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl">üì°</div>
                                <div class="font-bold text-sm text-blue-600">Router</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl">üåê</div>
                                <div class="font-bold text-sm text-gray-600">Internet</div>
                            </div>
                        </div>

                        <div class="text-center font-semibold text-xs mb-2 text-green-600">1. Normal Traffic Flow</div>
                        <div class="flex items-center text-green-600 font-bold mb-6">
                            <div class="flex-1 h-1 bg-green-500"></div>
                            <div class="mx-1">‚ñ∂</div>
                            <div class="flex-1 h-1 bg-green-500"></div>
                             <div class="mx-1">‚ñ∂</div>
                            <div class="flex-1 h-1 bg-green-500"></div>
                        </div>

                        <div class="flex justify-center items-center mb-4 relative">
                             <div class="text-center absolute bottom-0 -mb-6">
                                <div class="text-3xl">üíÄ</div>
                                <div class="font-bold text-sm text-red-600">Attacker</div>
                            </div>
                        </div>
                        
                        <div class="text-center font-semibold text-xs mb-2 text-red-600 mt-12">2. Attack: Malicious ARP & Interception</div>
                         <div class="flex items-center text-red-600 font-bold">
                            <div class="w-1/4 h-1 border-t-2 border-dashed border-red-500"></div>
                            <div class="text-xl mx-1">‚Üë</div>
                            <div class="flex-1 h-1 border-t-2 border-b-2 border-dashed border-red-500"></div>
                            <div class="mx-1">‚Üí</div>
                            <div class="w-1/4 h-1 border-t-2 border-dashed border-red-500"></div>
                        </div>
                         <p class="text-center text-xs text-red-500 mt-1">User's data is now sent to the attacker, who then forwards it to the router.</p>

                    </div>
                </div>
            </section>
            
            <section id="gemini-explainer" class="bg-white rounded-lg shadow-2xl p-6 md:p-8">
                <div class="text-center mb-8">
                    <h2 class="text-5xl font-bold text-[#004AAD] mb-2">See the OSI Model in Action ‚ú®</h2>
                    <p class="text-lg text-gray-700 max-w-3xl mx-auto">Enter a real-world task (e.g., "watching a YouTube video" or "playing Fortnite") to see how the 7 layers work together to make it happen.</p>
                </div>
                <div class="max-w-2xl mx-auto">
                    <div class="flex flex-col sm:flex-row gap-4">
                        <input type="text" id="scenario-input" class="flex-grow p-3 border-2 border-[#89B9FF] rounded-lg focus:ring-2 focus:ring-[#0062E3] focus:outline-none" placeholder="E.g., Sending an email">
                        <button id="generate-scenario-btn" class="bg-[#0062E3] text-white font-bold py-3 px-6 rounded-lg hover:bg-[#004AAD] transition-colors">Generate Explanation</button>
                    </div>
                    <div id="scenario-output" class="mt-8 p-6 bg-gray-50 rounded-lg min-h-[100px] text-gray-800 leading-relaxed">
                        Your explanation will appear here.
                    </div>
                </div>
            </section>

        </main>

        <footer class="text-center mt-16">
            <p class="text-lg font-semibold text-[#0062E3]">Understanding the OSI model is fundamental to mastering network engineering.</p>
        </footer>

    </div>

    <div id="analogy-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button id="modal-close-btn" class="absolute top-4 right-4 text-2xl text-gray-500 hover:text-gray-800">&times;</button>
            <h3 id="modal-title" class="text-4xl font-bold text-[#004AAD] mb-4">Analogy</h3>
            <div id="modal-body">
                <div class="loader"></div>
            </div>
        </div>
    </div>

    <script>
        function wrapLabel(str, maxWidth = 16) {
            if (!str || str.length <= maxWidth) {
                return str;
            }
            const words = str.split(' ');
            let lines = [];
            let currentLine = '';
            for (const word of words) {
                if ((currentLine + word).length > maxWidth && currentLine.length > 0) {
                    lines.push(currentLine.trim());
                    currentLine = '';
                }
                currentLine += word + ' ';
            }
            lines.push(currentLine.trim());
            return lines;
        }

        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
                return label.join(' ');
            }
            return label;
        };

        const tcpUdpCtx = document.getElementById('tcpUdpChart').getContext('2d');
        new Chart(tcpUdpCtx, {
            type: 'bar',
            data: {
                labels: ['Reliability', 'Speed', 'Overhead'],
                datasets: [
                    {
                        label: 'TCP',
                        data: [9, 5, 8],
                        backgroundColor: '#004AAD',
                        borderColor: '#004AAD',
                        borderWidth: 1
                    },
                    {
                        label: 'UDP',
                        data: [3, 9, 2],
                        backgroundColor: '#418CFF',
                        borderColor: '#418CFF',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 10,
                        ticks: { color: '#0062E3' },
                        grid: { color: '#CFE2FF' }
                    },
                    x: {
                        ticks: { color: '#0062E3', font: { weight: 'bold', size: 14 } },
                        grid: { display: false }
                    }
                },
                plugins: {
                    legend: { position: 'top', labels: { color: '#004AAD', font: { size: 14, weight: 'bold' } } },
                    tooltip: { callbacks: { title: tooltipTitleCallback } },
                    title: { display: true, text: 'Relative Comparison (1=Low, 10=High)', color: '#004AAD', font: { size: 16, weight: 'bold' } }
                }
            }
        });

        const analogyModal = document.getElementById('analogy-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalBody = document.getElementById('modal-body');
        const modalCloseBtn = document.getElementById('modal-close-btn');

        document.querySelectorAll('.gemini-button').forEach(button => {
            button.addEventListener('click', async () => {
                const layerGroup = button.dataset.layerGroup;
                modalTitle.textContent = `Analogy for ${layerGroup}`;
                modalBody.innerHTML = '<div class="loader"></div>';
                analogyModal.classList.remove('hidden');

                const prompt = `Explain the ${layerGroup} of the OSI model using a simple, creative analogy. For example, you could compare it to sending a letter or building a house. Keep the explanation concise and easy for a beginner to understand.`;
                
                try {
                    const explanation = await callGemini(prompt);
                    modalBody.innerHTML = explanation.replace(/\n/g, '<br>');
                } catch (error) {
                    modalBody.textContent = 'Sorry, something went wrong. Please try again.';
                    console.error(error);
                }
            });
        });

        modalCloseBtn.addEventListener('click', () => analogyModal.classList.add('hidden'));
        analogyModal.addEventListener('click', (e) => {
            if (e.target === analogyModal) {
                analogyModal.classList.add('hidden');
            }
        });

        const generateScenarioBtn = document.getElementById('generate-scenario-btn');
        const scenarioInput = document.getElementById('scenario-input');
        const scenarioOutput = document.getElementById('scenario-output');

        generateScenarioBtn.addEventListener('click', async () => {
            const userInput = scenarioInput.value.trim();
            if (!userInput) {
                scenarioOutput.textContent = 'Please enter a scenario first.';
                return;
            }

            scenarioOutput.innerHTML = '<div class="loader"></div><p class="text-center">Generating your explanation...</p>';
            
            const prompt = `You are a network expert explaining a concept to a student. Describe how the 7 layers of the OSI model work together to accomplish this user-provided task: "${userInput}". Go through each layer from 7 down to 1 (Application to Physical). For each layer, provide a brief, one or two-sentence explanation of its specific role in this exact scenario. Format the output clearly using HTML with headings (h4) for each layer and paragraphs (p) for the explanation.`;
            
            try {
                const explanation = await callGemini(prompt);
                scenarioOutput.innerHTML = explanation;
            } catch (error) {
                scenarioOutput.textContent = 'Sorry, something went wrong. Please try again.';
                console.error(error);
ci            }
        });

        async function callGemini(prompt) {
            const apiKey = "AIzaSyBp2Svk1JN7Rvjw4J4XqN7Ec4Kf6YlbTsQ"; 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
            
            const payload = {
                contents: [{
                    parts: [{
                        text: prompt
                    }]
                }]
            };

            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            if (!response.ok) {
                throw new Error(`API call failed with status: ${response.status}`);
            }

            const result = await response.json();
            
            if (result.candidates && result.candidates.length > 0 &&
                result.candidates[0].content && result.candidates[0].content.parts &&
                result.candidates[0].content.parts.length > 0) {
                return result.candidates[0].content.parts[0].text;
            } else {
                console.error("Unexpected API response structure:", result);
                if (result.candidates && result.candidates[0].finishReason) {
                    throw new Error(`Content generation failed. Reason: ${result.candidates[0].finishReason}`);
                }
                throw new Error('Could not extract text from API response.');
            }
        }
    </script>
</body>
</html>
